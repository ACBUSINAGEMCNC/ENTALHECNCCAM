(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{435:(e,a,t)=>{Promise.resolve().then(t.bind(t,4401))},4401:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>S});var r=t(5155);function n(){return(0,r.jsx)("header",{className:"bg-secondary text-secondary-foreground py-4 shadow-lg border-b",children:(0,r.jsx)("div",{className:"container max-w-7xl mx-auto px-4",children:(0,r.jsxs)("div",{className:"header-content flex flex-col sm:flex-row items-center justify-between",children:[(0,r.jsxs)("div",{className:"logo flex items-center",children:[(0,r.jsx)("img",{src:"/images/entalhy-logo.png",alt:"Entalhy CNC Logo",width:"150",height:"150",className:"object-contain"}),(0,r.jsxs)("div",{className:"ml-4 flex flex-col",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"ENTALHY CNC"}),(0,r.jsx)("div",{className:"text-sm font-medium text-accent-foreground",children:"A C B USINAGEM CNC LTDA."})]})]}),(0,r.jsxs)("div",{className:"mt-3 sm:mt-0 text-center sm:text-right",children:[(0,r.jsx)("strong",{children:"Gerador de C\xf3digo G para Usinagem de Entalhes"}),(0,r.jsx)("button",{id:"btnHelp",className:"ml-4 px-4 py-2 rounded-md transition-colors bg-muted hover:bg-accent text-muted-foreground",onClick:()=>{var e;return null===(e=document.getElementById("helpPanel"))||void 0===e?void 0:e.style.setProperty("display","flex")},children:"Ajuda"})]})]})})})}var o=t(2115);let i=(0,o.createContext)(void 0);function s(e){let{children:a}=e,[t,n]=(0,o.useState)(null),[s,l]=(0,o.useState)(null);return(0,r.jsx)(i.Provider,{value:{gCode:t,setGCode:n,simulationFrames:s,setSimulationFrames:l},children:a})}function l(){let e=(0,o.useContext)(i);if(void 0===e)throw Error("useSimulation must be used within a SimulationProvider");return e}var d=t(9085);function c(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=document.getElementById("messageContainer");t&&(t.textContent=e,t.className="message ".concat(a),t.style.display="block",setTimeout(()=>{t&&(t.style.display="none")},5e3))}function u(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter(Boolean).join(" ")}function m(e){let{text:a}=e,[t,n]=(0,o.useState)(!1);return(0,r.jsxs)("span",{className:"tooltip inline-block ml-2 relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[(0,r.jsx)("span",{className:"help-icon inline-flex items-center justify-center w-[18px] h-[18px] rounded-full bg-gray-500 hover:bg-primary text-white text-xs font-bold cursor-pointer transition-colors",children:"?"}),t&&(0,r.jsxs)("div",{className:"tooltip-text absolute z-50 w-64 bg-gray-800 text-white text-left rounded-md p-2.5 bottom-[125%] left-1/2 transform -translate-x-1/2 opacity-100 transition-opacity text-sm font-normal shadow-lg",children:[a,(0,r.jsx)("div",{className:"after:content-[''] after:absolute after:top-full after:left-1/2 after:ml-[-5px] after:border-[5px] after:border-solid after:border-t-gray-800 after:border-r-transparent after:border-b-transparent after:border-l-transparent"})]})]})}function h(e){let{title:a,children:t,defaultOpen:n=!1}=e,[i,s]=(0,o.useState)(n);return(0,r.jsxs)("div",{className:"collapsible-section border border-gray-200 dark:border-gray-700 rounded-md mb-4 bg-white dark:bg-gray-800",children:[(0,r.jsxs)("div",{className:"collapsible-header bg-gray-50 dark:bg-gray-800 p-3 font-bold cursor-pointer flex justify-between items-center text-gray-800 dark:text-white",onClick:()=>s(!i),children:[a,(0,r.jsx)("span",{children:i?"-":"+"})]}),(0,r.jsx)("div",{className:"collapsible-body p-4",style:{display:i?"block":"none"},children:t})]})}d.Kq,d.bL,d.l9,o.forwardRef((e,a)=>{let{className:t,sideOffset:n=4,...o}=e;return(0,r.jsx)(d.UC,{ref:a,sideOffset:n,className:u("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o})}).displayName=d.UC.displayName;var x=t(5921);let p=o.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,r.jsxs)(x.bL,{ref:a,className:u("relative flex w-full touch-none select-none items-center",t),...n,children:[(0,r.jsx)(x.CC,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:(0,r.jsx)(x.Q6,{className:"absolute h-full bg-primary"})}),(0,r.jsx)(x.zi,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]})});function f(){let[e,a]=(0,o.useState)({pontoInicioZ:"5",profundidadeFinal:"-5",numEntalhes:"4",avanco:"100",apY:"1",diametroInicial:"30",diametroFinal:"40",diametroFerramenta:"8",aberturaChaveta:"10",ladoCorte:"positivo",chavetaConica:!1,anguloConico:"5"}),[t,n]=(0,o.useState)({pontoInicioZ:5,profundidadeFinal:-5,numEntalhes:4,avanco:100,apY:1,diametroInicial:30,diametroFinal:40,diametroFerramenta:8,aberturaChaveta:10,ladoCorte:"positivo",chavetaConica:!1,anguloConico:5}),[i,s]=(0,o.useState)(100),[d,u]=(0,o.useState)({raioInicial:15,raioFinal:20,profundidadeCalculada:5,deslocamento:1,numPasses:2}),{gCode:x,setGCode:f}=l();(0,o.useEffect)(()=>{v(),j()},[t.diametroInicial,t.diametroFinal,t.diametroFerramenta,t.aberturaChaveta,i]);let g=e=>{let{id:t,value:r,type:o,checked:i}=e.target;"radio"===o?a(e=>({...e,ladoCorte:r})):"checkbox"===o?(a(e=>({...e,[t]:i})),n(e=>({...e,[t]:i}))):a(e=>({...e,[t]:r}))},b=e=>{let{id:a,value:t,type:r}=e.target;if("checkbox"===r||"radio"===r)return;let o=t;"string"!=typeof t||(""===(o=t.replace(",",".")).trim()?o="":isNaN(Number(o))||(o=Number(o))),"diametroInicial"===a||"diametroFinal"===a?n(e=>{let t={...e,[a]:o},r="diametroInicial"===a?o:e.diametroInicial,n="diametroFinal"===a?o:e.diametroFinal;return r<n?t.ladoCorte="positivo":r>n&&(t.ladoCorte="negativo"),t}):n(e=>({...e,[a]:o}))},v=()=>{let{diametroInicial:e,diametroFinal:a}=t;if(isNaN(e)||isNaN(a)||e===a)u(e=>({...e,raioInicial:e.raioInicial||0,raioFinal:e.raioFinal||0,profundidadeCalculada:e.profundidadeCalculada||0}));else{let t=e/2,r=a/2,n=Math.abs(r-t);u(e=>({...e,raioInicial:t,raioFinal:r,profundidadeCalculada:n}))}},j=()=>{let{diametroFerramenta:e,aberturaChaveta:a}=t;if(!isNaN(e)&&!isNaN(a)){if(a>e){let t;let r=(a-e)/2,n=i/100*e;a<=1.625*e?t=2:(t=Math.ceil((a-e)/n))%2==0&&t++,u(e=>({...e,deslocamento:r,numPasses:t}))}else u(e=>({...e,deslocamento:0,numPasses:1}))}},N=e=>{let a=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download="codigo_entalhy_cnc.nc",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),c("Arquivo salvo com sucesso: codigo_entalhy_cnc.nc","success")},y=function(a,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,r.jsxs)("div",{className:"form-group mb-4",children:[(0,r.jsxs)("label",{htmlFor:a,className:"block mb-1 font-medium",children:[t,(0,r.jsx)(m,{text:n})]}),(0,r.jsx)("input",{type:"text",id:a,value:e[a],onChange:g,onBlur:b,inputMode:"decimal",className:"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white",...o})]})};return(0,r.jsxs)("div",{className:"input-panel bg-card text-card-foreground shadow-lg border p-6 rounded-lg w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 pb-2 border-b",children:"Par\xe2metros de Usinagem"}),(0,r.jsxs)(h,{title:"Usinagem",defaultOpen:!0,children:[y("pontoInicioZ","Ponto In\xedcio Z (mm)","Posi\xe7\xe3o inicial da ferramenta no eixo Z.",{step:"0.1"}),y("profundidadeFinal","Profundidade Final Z (mm)","Profundidade final do corte no eixo Z. Valores negativos indicam movimento para baixo.",{step:"0.1"}),y("numEntalhes","N\xfamero de Entalhes","Quantidade de entalhes a serem usinados.",{min:"1"}),y("avanco","Avan\xe7o (mm/min)","Velocidade de avan\xe7o da ferramenta.",{min:"1"}),y("apY","Material por Passe AP Y (mm)","Quantidade de material removido por passe.",{step:"0.1",min:"0.1"})]}),(0,r.jsxs)(h,{title:"Geometria e Ferramenta",defaultOpen:!0,children:[y("diametroInicial","Di\xe2metro Inicial (mm)","Di\xe2metro inicial da pe\xe7a.",{step:"0.1",min:"1"}),y("diametroFinal","Di\xe2metro Final (mm)","Di\xe2metro final da pe\xe7a.",{step:"0.1",min:"1"}),y("diametroFerramenta","Di\xe2metro da Ferramenta (mm)","Di\xe2metro da ferramenta de corte.",{step:"0.1",min:"0.1"}),y("aberturaChaveta","Abertura da Chaveta X (mm)","Largura total da chaveta.",{step:"0.1",min:"0"}),t.aberturaChaveta>1.5*t.diametroFerramenta&&(0,r.jsxs)("div",{className:"form-group mb-4",children:[(0,r.jsx)("label",{className:"block mb-1 font-medium flex items-center justify-between",children:(0,r.jsxs)("span",{children:["Passo Lateral (",i,"% da ferramenta)",(0,r.jsx)(m,{text:"Define quanto da largura da ferramenta ser\xe1 usado para cada passe lateral. Valores menores resultam em mais passes e melhor acabamento."})]})}),(0,r.jsx)(p,{value:[i],min:10,max:100,step:5,className:"my-4",onValueChange:e=>s(e[0])}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Passo efetivo: ",(i/100*t.diametroFerramenta).toFixed(2)," mm"]})]})]}),(0,r.jsxs)(h,{title:"Chaveta C\xf4nica",defaultOpen:!0,children:[(0,r.jsx)("div",{className:"form-group mb-4",children:(0,r.jsxs)("label",{htmlFor:"chavetaConica",className:"flex items-center mb-1 font-medium",children:[(0,r.jsx)("input",{type:"checkbox",id:"chavetaConica",checked:t.chavetaConica,onChange:g,className:"mr-2 h-4 w-4"}),"Ativar Chaveta C\xf4nica",(0,r.jsx)(m,{text:"Ativa o modo de usinagem com inclina\xe7\xe3o em graus."})]})}),t.chavetaConica&&y("anguloConico","\xc2ngulo C\xf4nico (graus)","\xc2ngulo de inclina\xe7\xe3o da chaveta em graus.",{step:"0.1",min:"0"})]}),(0,r.jsxs)("div",{className:"bg-muted text-muted-foreground p-4 rounded-lg mt-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2 text-card-foreground",children:"Informa\xe7\xf5es Calculadas"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("p",{children:["Raio Inicial: ",d.raioInicial.toFixed(3)," mm"]}),(0,r.jsxs)("p",{children:["Raio Final: ",d.raioFinal.toFixed(3)," mm"]}),(0,r.jsxs)("p",{children:["Profundidade: ",d.profundidadeCalculada.toFixed(3)," mm"]}),(0,r.jsxs)("p",{children:["Deslocamento X: ",d.deslocamento.toFixed(3)," mm"]}),(0,r.jsxs)("p",{children:["Passes em X: ",d.numPasses]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col space-y-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>{try{let e;if(t.numEntalhes<=0){c("O n\xfamero de entalhes deve ser maior que zero.","error");return}if(t.avanco<=0){c("O avan\xe7o deve ser maior que zero.","error");return}if(t.apY<=0){c("O material por passe deve ser maior que zero.","error");return}if(t.diametroFinal===t.diametroInicial){c("O di\xe2metro final n\xe3o pode ser igual ao di\xe2metro inicial.","error");return}if(t.diametroFerramenta<=0){c("O di\xe2metro da ferramenta deve ser maior que zero.","error");return}t.aberturaChaveta>1.5*t.diametroFerramenta&&(e=i/100*t.diametroFerramenta);let a=function(e){let a=e.diametroInicial/2,t=e.diametroFinal/2,r=e.diametroInicial>e.diametroFinal,n=e.chavetaConica?e.anguloConico*Math.PI/180:0,o=360/e.numEntalhes,i=0,s=1,l=[0];if(e.aberturaChaveta>e.diametroFerramenta){let a=e.passoLateral&&e.passoLateral>0?Math.min(e.passoLateral,e.diametroFerramenta):e.diametroFerramenta,t=e.aberturaChaveta-e.diametroFerramenta,r=t/2;if(e.aberturaChaveta<=1.625*e.diametroFerramenta)s=2,l=[-r,r];else{(s=Math.ceil(t/(.9*a))+1)%2==0&&s++,l=[];let e=Math.floor(s/2);for(let a=-e;a<=e;a++){let t=a/e*r;l.push(t)}}l.sort((e,a)=>Math.abs(e)-Math.abs(a)),i=Math.max(...l.map(e=>Math.abs(e)))}let d=a;if(e.chavetaConica){let t=a+Math.abs(e.profundidadeFinal)*Math.tan(n);d="positivo"===e.ladoCorte?Math.min(a,t)-1:Math.max(a,t)+1}else d="positivo"===e.ladoCorte?Math.min(a,t)-1:Math.max(a,t)+1;let c=["G0 Z100","G0 Y0","G0 X0"];for(let s=0;s<e.numEntalhes;s++){c.push("G0 A".concat((o*s).toFixed(2))),c.push("G0 Z".concat(e.pontoInicioZ)),c.push("G0 Y".concat(a)),c.push("G0 X0");let u=a,m=r?-Math.abs(e.apY):Math.abs(e.apY);for(;;){if(i>0){for(let a of l){c.push("G0 X".concat(a.toFixed(3)));let t=u;e.chavetaConica?(t=u+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(t.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2))),a!==l[l.length-1]&&(c.push("G0 Z".concat(e.pontoInicioZ)),c.push("G0 Y".concat(u.toFixed(3))))}c.push("G0 Z".concat(e.pontoInicioZ)),c.push("G0 X0")}else{let a=u;e.chavetaConica?(a=u+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(a.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2))),c.push("G0 Z".concat(e.pontoInicioZ))}let a=Number.parseFloat((u+m).toFixed(3));if(r?a<=t:a>=t){if(a===t){if(c.push("G0 Y".concat(t.toFixed(3))),i>0){c.push("G0 X".concat(i.toFixed(3)));let a=t;e.chavetaConica?(a=t+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(a.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2))),c.push("G0 Z".concat(e.pontoInicioZ)),c.push("G0 Y".concat(t.toFixed(3))),c.push("G0 X".concat((-i).toFixed(3))),e.chavetaConica?(a=t+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(a.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2)))}else{let a=t;e.chavetaConica?(a=t+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(a.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2)))}c.push("G0 Z".concat(e.pontoInicioZ));break}if(u!==t){if(c.push("G0 Y".concat(t.toFixed(3))),i>0)for(let a of l){c.push("G0 X".concat(a.toFixed(3)));let r=t;e.chavetaConica?(r=t+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(r.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2))),a!==l[l.length-1]&&(c.push("G0 Z".concat(e.pontoInicioZ)),c.push("G0 Y".concat(t.toFixed(3))))}else{let a=t;e.chavetaConica?(a=t+Math.abs(e.profundidadeFinal)*Math.tan(n),c.push("G1 Y".concat(a.toFixed(3)," Z").concat(e.profundidadeFinal," F").concat(e.avanco," (Calculando para ").concat(e.anguloConico,"\xb0 graus)"))):c.push("G1 Z".concat(e.profundidadeFinal," F").concat(e.avanco)),c.push("G0 Y".concat(d.toFixed(2)))}c.push("G0 Z".concat(e.pontoInicioZ))}break}c.push("G0 Y".concat(a.toFixed(3))),u=a}}return c.push("G0 Z100"),c.push("M30"),c}({...t,passoLateral:e});f(a),c("C\xf3digo G gerado com sucesso!","success")}catch(e){console.error("Erro ao gerar c\xf3digo G:",e),c("Erro ao gerar c\xf3digo G: ".concat(e),"error")}},className:"w-full font-bold py-2 px-4 rounded bg-primary text-primary-foreground hover:bg-primary/90 transition-colors",children:"Gerar C\xf3digo G"}),(0,r.jsx)("button",{onClick:()=>{if(x&&x.length>0){let e=x.join("\n");if(window.pywebview)try{window.pywebview.api.save_file(e,"codigo_entalhy_cnc.nc").then(e=>{e.success?c(e.message,"success"):c(e.message,"warning")}).catch(a=>{console.error("Erro ao salvar arquivo via API:",a),c("Erro ao salvar arquivo: ".concat(a),"error"),N(e)})}catch(a){console.error("Erro ao acessar API Python:",a),c("N\xe3o foi poss\xedvel acessar a API de salvamento: ".concat(a),"error"),N(e)}else N(e)}else c("Nenhum c\xf3digo G para salvar.","error")},disabled:!x||0===x.length,className:"w-full font-bold py-2 px-4 rounded bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors disabled:bg-muted disabled:text-muted-foreground disabled:cursor-not-allowed",children:"Salvar C\xf3digo G"})]}),(0,r.jsx)("div",{id:"message-container",className:"mt-4"})]})}p.displayName=x.bL.displayName;let g=0;function b(e){let a=document.getElementById("angleNeedle"),t=document.getElementById("angleValue"),r=document.getElementById("angleFill"),n=document.getElementById("angleDisplayTop");if(g=Math.max(g,Math.abs(e)),n&&(n.textContent="A: ".concat(e.toFixed(1),"\xb0")),a&&t&&r){a.style.transform="rotate(".concat(e,"deg)"),t.textContent="".concat(e.toFixed(1),"\xb0");let n=function(e){if(0===e)return"polygon(50% 50%, 50% 0%, 50% 0%)";if(e>=360)return"circle(50% at 50% 50%)";let a=[];a.push("50% 50%"),a.push("50% 0%");let t=Math.max(36,Math.floor(e/10));for(let r=1;r<=t;r++){let n=e*r/t*(Math.PI/180),o=50+50*Math.sin(n),i=50-50*Math.cos(n);a.push("".concat(o,"% ").concat(i,"%"))}return"polygon(".concat(a.join(", "),")")}(Math.min(Math.abs(e),360));r.style.clipPath=n;let o=Math.min(.2+.2*Math.floor(Math.abs(e)/360),.8);r.style.backgroundColor="rgba(204, 0, 0, ".concat(o,")")}}function v(e,a,t){let r=document.getElementById("positionIndicator");r&&(r.textContent="X: ".concat(e.toFixed(2)," | Y: ").concat(a.toFixed(2)," | Z: ").concat(t.toFixed(2)))}function j(e){let{simulationFrames:a,currentFrame:t,zoomLevel:n,setZoomLevel:i}=e,s=(0,o.useRef)(null),l=(0,o.useRef)(!1),d=(0,o.useRef)(0),c=(0,o.useRef)(0),u=(0,o.useRef)(0),m=(0,o.useRef)(0);return(0,o.useEffect)(()=>{let e=s.current;if(!e)return;let r=e.getContext("2d");if(r){if(a.length>0&&t<a.length){let e=a[t];v(e.x||0,e.y,e.z),b(e.a)}r.clearRect(0,0,e.width,e.height),N(r,e.width,e.height,n,u.current,m.current),a.length>0?(t<a.length&&function(e,a,t,r,n,o,i){let s=a.a*Math.PI/180,l=20*n;e.save(),e.translate((80+o)*n,(r/2+i)*n),e.beginPath(),e.arc(0,0,l,0,2*Math.PI),e.strokeStyle="#333",e.lineWidth=1,e.stroke(),e.fillStyle="rgba(200, 200, 200, 0.5)",e.fill(),e.beginPath(),e.moveTo(0,0),e.lineTo(l*Math.cos(s),l*Math.sin(s)),e.strokeStyle="#cc0000",e.lineWidth=2,e.stroke(),e.beginPath(),e.arc(l*Math.cos(s),l*Math.sin(s),3,0,2*Math.PI),e.fillStyle="#cc0000",e.fill(),e.fillStyle="#333",e.font="10px Arial",e.textAlign="center",e.fillText("A: ".concat(a.a.toFixed(1),"\xb0"),0,-l-10),e.restore()}(r,a[t],e.width,e.height,n,u.current,m.current),y(r,a,t,e.width,e.height,n,u.current,m.current)):(r.font="14px Arial",r.textAlign="center",r.fillStyle="#333",r.fillText("Gere o C\xf3digo G e clique em Iniciar Simula\xe7\xe3o para visualizar",e.width/2,e.height/2-50))}},[a,t,n]),(0,o.useEffect)(()=>{let e=()=>{let e=s.current;if(!e)return;let r=e.parentElement;if(!r)return;e.width=r.clientWidth,e.height=r.clientHeight;let o=e.getContext("2d");o&&(N(o,e.width,e.height,n,u.current,m.current),a.length>0&&y(o,a,t,e.width,e.height,n,u.current,m.current))};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[a,t,n]),(0,o.useEffect)(()=>{let e=s.current;if(!e)return;let r=a=>{l.current=!0,d.current=a.clientX,c.current=a.clientY,e.style.cursor="grabbing"},o=r=>{if(!l.current)return;let o=r.clientX-d.current,i=r.clientY-c.current;u.current+=o/n,m.current+=i/n,d.current=r.clientX,c.current=r.clientY;let s=e.getContext("2d");s&&(s.clearRect(0,0,e.width,e.height),N(s,e.width,e.height,n,u.current,m.current),a.length>0&&y(s,a,t,e.width,e.height,n,u.current,m.current))},h=()=>{l.current&&(l.current=!1,e.style.cursor="default")},x=e=>{e.preventDefault(),i(Math.max(.5,Math.min(4,n+(e.deltaY>0?-.1:.1))))};return e.addEventListener("mousedown",r),document.addEventListener("mousemove",o),document.addEventListener("mouseup",h),e.addEventListener("wheel",x),()=>{e.removeEventListener("mousedown",r),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",h),e.removeEventListener("wheel",x)}},[n,i,a,t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("canvas",{ref:s,className:"w-full h-full"}),(0,r.jsx)("div",{className:"angle-display absolute top-2 right-5 px-3 py-1 bg-white dark:bg-gray-800 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-center font-bold text-lg",id:"angleDisplayTop",children:"A: 0.0\xb0"}),(0,r.jsxs)("div",{className:"angle-indicator absolute top-14 right-5 w-[100px] h-[100px] rounded-full border-2 border-gray-700 bg-white/80 overflow-hidden",children:[(0,r.jsx)("div",{className:"angle-fill absolute inset-0 bg-primary/20 origin-center",id:"angleFill"}),(0,r.jsx)("div",{className:"angle-center absolute top-1/2 left-1/2 w-[10px] h-[10px] bg-gray-700 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),(0,r.jsx)("div",{className:"angle-needle absolute top-1/2 left-1/2 w-[45px] h-[2px] bg-primary origin-left",id:"angleNeedle"}),(0,r.jsx)("div",{className:"angle-value absolute -bottom-[25px] left-0 w-full text-center text-xs font-bold",id:"angleValue",children:"0\xb0"})]}),(0,r.jsx)("div",{className:"position-indicator absolute bottom-2 left-2 bg-white/90 px-2 py-1 rounded text-xs border border-gray-300",id:"positionIndicator",children:"X: 0.00 | Y: 0.00 | Z: 0.00"})]})}function N(e,a,t,r,n,o){let i=(80+n)*r,s=(t/2+o)*r,l=5*r,d=5*r;e.beginPath(),e.moveTo(40,s),e.lineTo(a-40,s),e.strokeStyle="#000",e.lineWidth=1,e.stroke(),e.beginPath(),e.moveTo(i,40),e.lineTo(i,t-40),e.stroke(),e.font="12px Arial",e.fillStyle="#333",e.fillText("Z",a-40+10,s+5),e.fillText("Y",i-5,30),e.textAlign="center";for(let a=-40;a<=40;a+=5){let t=i+a*l;e.beginPath(),e.moveTo(t,s-5),e.lineTo(t,s+5),e.stroke(),0!==a&&e.fillText(a.toString(),t,s+20)}for(let a=-40;a<=40;a+=5){let t=s-a*d;e.beginPath(),e.moveTo(i-5,t),e.lineTo(i+5,t),e.stroke(),0!==a&&(e.textAlign="right",e.fillText(a.toString(),i-10,t+4))}}function y(e,a,t,r,n,o,i,s){if(t>=a.length)return;let l=(80+i)*o,d=(n/2+s)*o,c=5*o,u=5*o;e.beginPath(),e.moveTo(l,d);for(let r=0;r<=t;r++){let t=a[r],n=l+t.z*c,o=d-t.y*u;e.strokeStyle="G1"===t.cmd?"#cc0000":"#0066cc",e.lineWidth="G1"===t.cmd?2:1,e.lineTo(n,o),e.stroke(),e.beginPath(),e.moveTo(n,o)}let m=a[t],h=l+m.z*c,x=d-m.y*u;e.beginPath(),e.arc(h,x,8,0,2*Math.PI),e.fillStyle="G1"===m.cmd?"rgba(204, 0, 0, 0.7)":"rgba(0, 102, 204, 0.7)",e.fill(),e.strokeStyle="#000",e.lineWidth=1,e.stroke()}var w=t(3264),C=t(7431),F=t(5416);function k(e){let{simulationFrames:a,currentFrame:t}=e,n=(0,o.useRef)(null),i=(0,o.useRef)(null),s=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),c=(0,o.useRef)(null),u=(0,o.useRef)(null);(0,o.useRef)(null),(0,o.useRef)(null);let m=()=>{if(!i.current)return;i.current.children.forEach(e=>{e.userData.isLegend&&i.current.remove(e)});let e=new w.N1A(new w.LoY().setFromPoints([new w.Pq0(-90,80,0),new w.Pq0(-70,80,0)]),new w.mrM({color:0xff0000,linewidth:4}));e.userData.isLegend=!0;let a=new w.N1A(new w.LoY().setFromPoints([new w.Pq0(-90,70,0),new w.Pq0(-70,70,0)]),new w.mrM({color:43775,linewidth:3}));a.userData.isLegend=!0,i.current.add(e),i.current.add(a)};return(0,o.useEffect)(()=>{if(!n.current)return;for(;n.current.firstChild;)n.current.removeChild(n.current.firstChild);let e=new w.Z58;e.background=new w.Q1f(1184274),i.current=e;let a=n.current.clientWidth/n.current.clientHeight,t=new w.ubm(60,a,.1,1e3);t.position.set(150,-150,150),t.lookAt(0,0,0),s.current=t;let r=new w.fTw(200,20,5592405,3355443);e.add(r);let o=new w.fTw(200,20,4473924,2236962);o.rotation.x=Math.PI/2,e.add(o);let m=new w.IzY(50);e.add(m);let h=new C.JeP({antialias:!0});h.setPixelRatio(window.devicePixelRatio),h.setSize(n.current.clientWidth,n.current.clientHeight),n.current.appendChild(h.domElement),l.current=h;let x=new w.$p8(4210752);e.add(x);let p=new w.ZyN(0xffffff,.8);p.position.set(1,1,1),e.add(p);let f=new w.YJl,g=new w.Ho_(.5,0,5,8),b=new w.V9B({color:0xffaa00}),v=new w.eaF(g,b);v.rotation.x=Math.PI/2,v.position.y=5,f.add(v),e.add(f),u.current=f;let j=new F.N(t,h.domElement);j.enableDamping=!0,j.dampingFactor=.05,d.current=j;let N=()=>{c.current=requestAnimationFrame(N),j.update(),h.render(e,t)};N();let y=()=>{if(!n.current||!t||!h)return;let e=n.current.clientWidth,a=n.current.clientHeight;t.aspect=e/a,t.updateProjectionMatrix(),h.setSize(e,a)};return window.addEventListener("resize",y),()=>{window.removeEventListener("resize",y),cancelAnimationFrame(c.current),j.dispose(),h.dispose()}},[]),(0,o.useEffect)(()=>{if(m(),!i.current||!a.length||void 0===t)return;i.current.children.forEach(e=>{e.userData.isToolPath&&i.current.remove(e)});let e=[],r=[],n="",o=a.slice(0,t+1);if(o.forEach((a,t)=>{let i=a.a*(Math.PI/180),s=a.x*Math.cos(i)-a.y*Math.sin(i),l=a.x*Math.sin(i)+a.y*Math.cos(i),d=a.z,c=(a.gCode||"G1").toUpperCase();c!==n&&(r.length>0&&e.push({points:r,isG0:"G0"===n}),r=[],n=c),r.push(new w.Pq0(s,d,l)),t===o.length-1&&e.push({points:r,isG0:"G0"===n})}),e.forEach(e=>{if(e.points.length>1&&i.current){let a=new w.LoY().setFromPoints(e.points),t=new w.mrM({color:e.isG0?0xff0000:43775,linewidth:e.isG0?4:3}),r=new w.N1A(a,t);r.userData.isToolPath=!0,i.current.add(r)}}),void 0!==t&&t<a.length){let e=a[t],r=e.a*(Math.PI/180),n=e.x*Math.cos(r)-e.y*Math.sin(r),o=e.x*Math.sin(r)+e.y*Math.cos(r),s=e.z;v(e.x,e.y,e.z),b(e.a);let l="G0"===(e.gCode||"G1").toUpperCase(),d=new w.eaF(new w.Gu$(3,16,16),new w.V9B({color:l?0xff0000:43775}));d.position.set(n,s,o),d.userData.isToolPath=!0,i.current.add(d)}},[a,t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{ref:n,className:"w-full h-full"}),(0,r.jsx)("div",{className:"angle-display absolute top-2 right-5 px-3 py-1 bg-white dark:bg-gray-800 rounded border border-gray-300 dark:border-gray-600 shadow-sm text-center font-bold text-lg",id:"angleDisplayTop",children:"A: 0.0\xb0"}),(0,r.jsxs)("div",{className:"angle-indicator absolute top-14 right-5 w-[100px] h-[100px] rounded-full border-2 border-gray-700 bg-white/80 overflow-hidden",children:[(0,r.jsx)("div",{className:"angle-fill absolute inset-0 bg-primary/20 origin-center",id:"angleFill"}),(0,r.jsx)("div",{className:"angle-center absolute top-1/2 left-1/2 w-[10px] h-[10px] bg-gray-700 rounded-full transform -translate-x-1/2 -translate-y-1/2"}),(0,r.jsx)("div",{className:"angle-needle absolute top-1/2 left-1/2 w-[45px] h-[2px] bg-primary origin-left",id:"angleNeedle"}),(0,r.jsx)("div",{className:"angle-value absolute -bottom-[25px] left-0 w-full text-center text-xs font-bold",id:"angleValue",children:"0\xb0"})]}),(0,r.jsx)("div",{className:"position-indicator absolute bottom-2 left-2 bg-white/90 px-2 py-1 rounded text-xs border border-gray-300",id:"positionIndicator",children:"X: 0.00 | Y: 0.00 | Z: 0.00"})]})}function G(e){let{simulationActive:a,simulationPaused:t,toggleSimulation:n,togglePause:o,restartSimulation:i,simulationSpeed:s,setSimulationSpeed:l,zoomLevel:d,setZoomLevel:c,hasSimulationData:u,saveGCode:m,blockByBlockMode:h,stepBlock:x}=e,p="flex items-center justify-center text-white px-3 py-2 md:px-4 md:py-2 rounded-md font-medium transition-all shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-900";return(0,r.jsxs)("div",{className:"simulation-controls mt-4 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg shadow-md transition-all",children:[(0,r.jsxs)("div",{className:"simulation-buttons grid grid-cols-2 sm:flex sm:flex-wrap gap-2 mb-5",children:[(0,r.jsxs)("button",{className:"".concat(p," ").concat(a?"bg-red-600 hover:bg-red-700 focus:ring-red-500 col-span-2 sm:col-auto":"bg-sky-600 hover:bg-sky-700 focus:ring-sky-500 col-span-2 sm:col-auto","\n          "),onClick:n,disabled:!u,title:a?"Parar simula\xe7\xe3o":"Iniciar simula\xe7\xe3o",children:[(0,r.jsx)("span",{className:"icon mr-1.5",children:a?"⏹️":"▶️"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:a?"Parar":"Iniciar"}),(0,r.jsx)("span",{className:"sm:hidden",children:a?"Parar":"Iniciar"})," "]}),(0,r.jsxs)("button",{className:"".concat(p," ").concat(t?"bg-teal-500 hover:bg-teal-600 focus:ring-teal-400":"bg-slate-500 hover:bg-slate-600 focus:ring-slate-400 dark:bg-slate-600 dark:hover:bg-slate-500","\n          "),onClick:o,disabled:!a||!u||h,title:t?"Continuar simula\xe7\xe3o":"Pausar simula\xe7\xe3o",children:[(0,r.jsx)("span",{className:"icon mr-1.5",children:t?"▶️":"⏸️"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:t?"Continuar":"Pausar"}),(0,r.jsx)("span",{className:"sm:hidden",children:t?"Cont.":"Pausar"})]}),(0,r.jsxs)("button",{className:"".concat(p," ").concat(h?"bg-violet-600 hover:bg-violet-700 focus:ring-violet-500":"bg-slate-500 hover:bg-slate-600 focus:ring-slate-400 dark:bg-slate-600 dark:hover:bg-slate-500","\n          "),onClick:x,disabled:!u,title:"Executar simula\xe7\xe3o bloco a bloco",children:[(0,r.jsx)("span",{className:"icon mr-1.5",children:"⏭️"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Bloco a Bloco"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Blocos"})]}),(0,r.jsxs)("button",{className:"".concat(p," bg-slate-500 hover:bg-slate-600 focus:ring-slate-400 dark:bg-slate-600 dark:hover:bg-slate-500"),onClick:i,disabled:!u,title:"Reiniciar simula\xe7\xe3o",children:[(0,r.jsx)("span",{className:"icon mr-1.5",children:"\uD83D\uDD04"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Reiniciar"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Zerar"})]}),(0,r.jsxs)("button",{className:"".concat(p," bg-emerald-600 hover:bg-emerald-700 focus:ring-emerald-500 col-span-2 sm:col-auto sm:ml-auto"),onClick:m,disabled:!u,title:"Salvar c\xf3digo G",children:[(0,r.jsx)("span",{className:"icon mr-1.5",children:"\uD83D\uDCBE"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Salvar C\xf3digo"}),(0,r.jsx)("span",{className:"sm:hidden",children:"Salvar"})]})]}),(0,r.jsxs)("div",{className:"control-group mb-4",children:[(0,r.jsx)("label",{htmlFor:"simulationSpeed",className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"Velocidade da Simula\xe7\xe3o:"}),(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("input",{type:"range",id:"simulationSpeed",min:"0.1",max:"5",step:"0.1",value:s,onChange:e=>l(Number.parseFloat(e.target.value)),className:"flex-grow h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-sky-600 dark:accent-sky-500"}),(0,r.jsxs)("span",{className:"ml-3 font-semibold text-sky-600 dark:text-sky-400 min-w-[40px] text-sm text-center bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded-md",children:[s.toFixed(1),"x"]})]})]}),(0,r.jsxs)("div",{className:"control-group",children:[(0,r.jsx)("label",{htmlFor:"zoomLevel",className:"block mb-1 text-sm font-medium text-slate-700 dark:text-slate-300",children:"N\xedvel de Zoom:"}),(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("button",{className:"zoom-button w-8 h-8 flex items-center justify-center bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 border border-slate-300 dark:border-slate-600 rounded-md text-lg font-semibold text-slate-700 dark:text-slate-300 cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500",onClick:()=>c(Math.max(.5,d-.1)),"aria-label":"Diminuir zoom",children:"-"}),(0,r.jsx)("input",{type:"range",id:"zoomLevel",className:"zoom-slider flex-grow mx-3 h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer dark:bg-slate-700 accent-sky-600 dark:accent-sky-500",min:"0.5",max:"4",step:"0.1",value:d,onChange:e=>c(Number.parseFloat(e.target.value))}),(0,r.jsx)("button",{className:"zoom-button w-8 h-8 flex items-center justify-center bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 border border-slate-300 dark:border-slate-600 rounded-md text-lg font-semibold text-slate-700 dark:text-slate-300 cursor-pointer transition-colors focus:outline-none focus:ring-2 focus:ring-sky-500",onClick:()=>c(Math.min(4,d+.1)),"aria-label":"Aumentar zoom",children:"+"}),(0,r.jsxs)("span",{className:"ml-3 font-semibold text-slate-700 dark:text-slate-300 min-w-[50px] text-sm text-center bg-slate-200 dark:bg-slate-700 px-2 py-0.5 rounded-md",children:[Math.round(100*d),"%"]})]})]})]})}function M(){let[e,a]=(0,o.useState)(!1),[t,n]=(0,o.useState)(!1),[i,s]=(0,o.useState)(!1),[d,u]=(0,o.useState)(0),[m,h]=(0,o.useState)(1),[x,p]=(0,o.useState)(1),[f,g]=(0,o.useState)(!1),{gCode:b,simulationFrames:v,setSimulationFrames:N}=l(),y=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(b&&b.length>0){let e=function(e){let a=[],t={x:0,y:0,z:0,a:0,cmd:"G0"};for(let r of e){let e=r.trim();if(e&&(e.startsWith("G0")||e.startsWith("G1"))){let r=e.split(" ")[0],n=function(e,a){let t;let r=/([XYZAF])([-+]?[0-9]*\.?[0-9]+)/g,n={...a};for(;null!==(t=r.exec(e));){let[e,a,r]=t;n[a.toLowerCase()]=Number.parseFloat(r)}return n}(e,{...t,cmd:r});a.push(n),t={...n}}}return a}(b);console.log("Processed Simulation Frames:",e),N(e),u(0),c("Simula\xe7\xe3o pronta! Clique em Iniciar Simula\xe7\xe3o para visualizar.","success")}},[b,N]),(0,o.useEffect)(()=>{if(y.current&&(cancelAnimationFrame(y.current),y.current=null),t&&!i&&!f){let e=null,a=()=>{u(e=>e>=((null==v?void 0:v.length)||0)-1?(setTimeout(()=>{n(!1)},0),0):e+(x<=1?1:Math.ceil(x))),e&&clearTimeout(e),e=setTimeout(()=>{!t||i||f||(y.current=requestAnimationFrame(a))},x<=1?100/x:100/Math.sqrt(x))};return y.current=requestAnimationFrame(a),()=>{e&&clearTimeout(e),y.current&&(cancelAnimationFrame(y.current),y.current=null)}}},[t,i,x,v,f]);let w=()=>{if(!b||0===b.length){c("Nenhum c\xf3digo G para salvar!","error");return}let e=b.join("\n");if(window.pywebview)try{window.pywebview.api.save_file(e,"codigo_entalhy_cnc.nc").then(e=>{e.success?c(e.message,"success"):c(e.message,"error")}).catch(a=>{c("Erro ao salvar arquivo: "+a,"error"),C(e)})}catch(a){c("N\xe3o foi poss\xedvel acessar a API de salvamento: "+a,"error"),C(e)}else C(e)},C=e=>{let a=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(a),r=document.createElement("a");r.href=t,r.download="codigo_entalhy_cnc.nc",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),c("C\xf3digo G salvo com sucesso!","success")};return(0,r.jsxs)("div",{className:"output-panel flex-1 flex flex-col max-w-full",children:[(0,r.jsxs)("div",{className:"code-output bg-card shadow-lg rounded-lg p-4 sm:p-5 h-72 overflow-auto font-mono mb-5 border border-border",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("h2",{className:"text-foreground text-lg font-semibold",children:"C\xf3digo G Gerado"}),b&&b.length>0&&(0,r.jsxs)("button",{className:"text-primary hover:text-primary/90 text-sm flex items-center transition-colors hover:underline",onClick:w,children:[(0,r.jsx)("span",{className:"mr-1",children:"\uD83D\uDCBE"})," Salvar"]})]}),(0,r.jsx)("div",{className:"bg-muted/50 p-3 rounded border border-border",children:b&&b.length>0?(0,r.jsx)("pre",{className:"text-sm text-foreground overflow-x-auto",children:b.join("\n")}):(0,r.jsx)("em",{className:"text-muted-foreground block text-center py-4",children:"O c\xf3digo G ser\xe1 gerado aqui..."})})]}),(0,r.jsxs)("div",{className:"visualization bg-card rounded-lg p-4 sm:p-5 shadow-lg flex-grow relative border border-border",children:[(0,r.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-4 pb-2 border-b border-border",children:[(0,r.jsx)("h2",{className:"text-destructive dark:text-destructive/90 text-xl font-semibold",children:"Visualiza\xe7\xe3o da Simula\xe7\xe3o"}),(0,r.jsx)("div",{className:"view-toggle",children:(0,r.jsxs)("button",{className:"px-3 py-1.5 rounded-md text-sm font-medium transition-colors ".concat(e?"bg-accent text-accent-foreground":"bg-secondary text-secondary-foreground"),onClick:()=>a(e=>!e),children:[(0,r.jsx)("span",{className:"mr-1",children:e?"3D":"2D"}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Visualiza\xe7\xe3o"})]})})]}),(0,r.jsxs)("div",{className:"canvas-container relative w-full h-[250px] sm:h-[350px] border border-border rounded-lg overflow-hidden bg-muted/30 shadow-inner",children:[e?(0,r.jsx)(k,{simulationFrames:v||[],currentFrame:d}):(0,r.jsx)(j,{simulationFrames:v||[],currentFrame:d,zoomLevel:m,setZoomLevel:h}),v&&v.length>0&&(0,r.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black/70 dark:bg-black/80 text-white px-2 py-1 rounded-md text-xs",children:["Frame: ",d+1,"/",v.length]})]}),(0,r.jsx)(G,{simulationActive:t,simulationPaused:i,toggleSimulation:()=>{if(!v||0===v.length){c("Nenhum c\xf3digo gerado para simular!","error");return}t?(n(!1),s(!1),g(!1),y.current&&(cancelAnimationFrame(y.current),y.current=null)):(n(!0),s(!1),g(!1))},togglePause:()=>{t&&(i&&g(!1),s(e=>!e),!i&&y.current&&(cancelAnimationFrame(y.current),y.current=null))},restartSimulation:()=>{u(0)},simulationSpeed:x,setSimulationSpeed:p,zoomLevel:m,setZoomLevel:h,hasSimulationData:!!v&&v.length>0,saveGCode:w,blockByBlockMode:f,stepBlock:()=>{if(!v||0===v.length){c("Nenhum c\xf3digo gerado para simular!","error");return}y.current&&(cancelAnimationFrame(y.current),y.current=null),f||(g(!0),n(!0),s(!0)),u(e=>{let a=e+1;return a>=((null==v?void 0:v.length)||0)?(setTimeout(()=>{n(!1),g(!1)},0),0):a})}}),(0,r.jsx)("div",{id:"messageContainer",className:"message info hidden mt-5 p-3 rounded text-center font-medium"})]})]})}function P(){return(0,r.jsxs)("div",{className:"help-panel hidden fixed inset-0 bg-black/70 z-50 justify-center items-center",id:"helpPanel",children:[(0,r.jsx)("button",{className:"help-close absolute top-4 right-4 bg-transparent border-none text-2xl cursor-pointer text-white",onClick:()=>{var e;return null===(e=document.getElementById("helpPanel"))||void 0===e?void 0:e.style.setProperty("display","none")},children:"\xd7"}),(0,r.jsxs)("div",{className:"help-content bg-white dark:bg-slate-800 rounded-lg p-5 max-w-2xl max-h-[80vh] overflow-y-auto shadow-lg dark:text-slate-200 border dark:border-slate-700",children:[(0,r.jsx)("h3",{className:"text-primary dark:text-primary-foreground text-xl font-bold mb-4",children:"Ajuda - ENTALHY CNC"}),(0,r.jsx)("h4",{className:"font-bold mt-4 mb-2 text-foreground dark:text-slate-100",children:"O que \xe9 o ENTALHY CNC?"}),(0,r.jsx)("p",{children:"O ENTALHY CNC \xe9 um gerador de c\xf3digo G especializado para usinagem de entalhes e chavetas em pe\xe7as cil\xedndricas. O aplicativo permite configurar todos os par\xe2metros necess\xe1rios e gera automaticamente o c\xf3digo G para m\xe1quinas CNC."}),(0,r.jsx)("h4",{className:"font-bold mt-4 mb-2 text-foreground dark:text-slate-100",children:"Como usar:"}),(0,r.jsxs)("ol",{className:"list-decimal pl-5 space-y-1 text-foreground dark:text-slate-300",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Configure os par\xe2metros"})," - Ajuste todos os valores de acordo com sua necessidade de usinagem."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Gere o c\xf3digo"}),' - Clique em "Gerar C\xf3digo G" para criar o programa CNC.']}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Simule"})," - Visualize a trajet\xf3ria da ferramenta antes de enviar para a m\xe1quina."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Salve o c\xf3digo"})," - Exporte o c\xf3digo G para um arquivo .nc que pode ser carregado na sua m\xe1quina CNC."]})]}),(0,r.jsx)("h4",{className:"font-bold mt-4 mb-2 text-foreground dark:text-slate-100",children:"Par\xe2metros principais:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-foreground dark:text-slate-300",children:[(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Ponto In\xedcio Z"})," - Posi\xe7\xe3o inicial da ferramenta no eixo Z."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Profundidade Final Z-"})," - Profundidade m\xe1xima de corte no eixo Z."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"N\xfamero de Entalhes"})," - Quantidade de entalhes distribu\xeddos uniformemente ao redor da pe\xe7a."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Avan\xe7o F"})," - Velocidade de avan\xe7o da ferramenta durante o corte."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Material por Passe AP Y"})," - Quantidade de material removido em cada passe no eixo Y."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Di\xe2metros da Pe\xe7a"})," - Di\xe2metro inicial e final da pe\xe7a, que determinam a profundidade do corte."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Di\xe2metro da Ferramenta"})," - Tamanho da ferramenta de corte utilizada."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Abertura da Chaveta X"})," - Largura total da chaveta em mil\xedmetros."]}),(0,r.jsxs)("li",{children:[(0,r.jsx)("strong",{children:"Lado do Recuo"})," - Define para qual lado a ferramenta recua ap\xf3s cada corte."]})]}),(0,r.jsx)("h4",{className:"font-bold mt-4 mb-2 text-foreground dark:text-slate-100",children:"Dicas:"}),(0,r.jsxs)("ul",{className:"list-disc pl-5 space-y-1 text-foreground dark:text-slate-300",children:[(0,r.jsx)("li",{children:'Use valores menores de "Material por Passe" para melhor acabamento.'}),(0,r.jsx)("li",{children:'Ajuste a "Abertura da Chaveta X" de acordo com a ferramenta utilizada.'}),(0,r.jsx)("li",{children:"Sempre simule o c\xf3digo antes de envi\xe1-lo para a m\xe1quina CNC."}),(0,r.jsx)("li",{children:"Para pe\xe7as de maior di\xe2metro, considere aumentar o n\xfamero de passes."})]})]})]})}var E=t(1362);function I(){let[e,a]=(0,o.useState)(!1),{theme:t,setTheme:n}=(0,E.D)();if((0,o.useEffect)(()=>{a(!0)},[]),!e)return null;let i="dark"===t;return(0,r.jsx)("button",{className:"fixed bottom-6 right-6 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-200 border border-slate-200 dark:border-slate-700 rounded-full w-14 h-14 flex items-center justify-center cursor-pointer shadow-lg hover:shadow-xl transition-all duration-200 z-50 group hover:scale-105",onClick:()=>{n("dark"===t?"light":"dark")},"aria-label":i?"Mudar para tema claro":"Mudar para tema escuro",title:i?"Mudar para tema claro":"Mudar para tema escuro",children:(0,r.jsx)("span",{className:"text-2xl transition-transform duration-200 group-hover:scale-110",children:i?"☀️":"\uD83C\uDF19"})})}function A(){return(0,r.jsx)("footer",{className:"mt-10 text-center bg-slate-800 dark:bg-slate-900 text-white text-sm py-5 border-t border-slate-200 dark:border-slate-700",children:(0,r.jsxs)("div",{className:"container max-w-7xl mx-auto px-4 flex flex-col gap-1",children:[(0,r.jsxs)("div",{children:["\xa9 ",new Date().getFullYear()," ENTALHY CNC - Aplicativo Gerador de C\xf3digo G"]}),(0,r.jsx)("div",{className:"text-gray-300 dark:text-gray-400 text-xs",children:"Desenvolvido por Cristiano Bochnia Para Artcompany A C B USINAGEM CNC LTDA."}),(0,r.jsx)("div",{className:"text-gray-300 dark:text-gray-400 text-xs",children:"Endere\xe7o: AVENIDA PIQUIRI N\xb0: 3146 - Bairro: BRASMADEIRA - Cidade: CASCAVEL"})]})})}function S(){return(0,r.jsx)(s,{children:(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)(n,{}),(0,r.jsx)("main",{className:"flex-grow",children:(0,r.jsx)("div",{className:"container max-w-7xl mx-auto px-4 py-6",children:(0,r.jsxs)("div",{className:"main-content flex flex-col md:flex-row gap-6",children:[(0,r.jsx)(f,{}),(0,r.jsx)(M,{})]})})}),(0,r.jsx)(P,{}),(0,r.jsx)(I,{}),(0,r.jsx)(A,{})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[367,831,919,441,684,358],()=>a(435)),_N_E=e.O()}]);